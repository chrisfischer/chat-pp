syntax = "proto3";

package SS;

message TextMessage {
  string room = 1;
  string text = 2;
}

message NicknameMessage {
  string room = 1;
  string old_nickname = 2;
  string new_nickname = 3;
}

message JoinMessage {
  string room = 1;
  string nickname = 2;
}

message LeftMessage {
  string room = 1;
  string nickname = 2;
}

message VoteMessage {
  string room = 1;
  string vote_id = 2;
  bool vote = 3;
}

message StartVoteMessage {
  string room = 1;
  string vote_id = 2;
  string message = 3;
}

message MessageRequest {
  string sender_id = 1;
  oneof message_oneof {
    TextMessage text_message = 2;
    NicknameMessage nickname_message = 3;
    JoinMessage join_message = 4;
    LeftMessage left_message = 5;
    VoteMessage vote_message = 6;
    StartVoteMessage start_vote_message = 7;
  }
}

message Empty {}

service MessageService {
  rpc ServerServerService (MessageRequest) returns (Empty);
}